<!DOCTYPE html>
<html layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8"/>
   	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
	<section class="layout-content" layout:fragment="corpo">
	
	
		<div class="page-header">
			<nav class="navbar navbar-expand-md bg-light">
	
				<div class="collapse navbar-collapse" id="navbarsExampleDefault">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item active">
							<i class="oi oi-caret-right"></i>
							<span>Entrada de produtos</span>
						</li>
					</ul>
				</div>
	
				<!-- <a class="btn btn-primary btn-md" href="/produtos/entrada" role="button">
			                    <span class="oi oi-plus" title="Listar" aria-hidden="true"></span>
			                    <span>Entrada de Produtos</span>
			                </a>-->
	
			</nav>
		</div>
		<div class="container" id="cadastro">
	
			<form th:action="@{/entrada/adicionar}" th:object="${entrada}" method="POST">
	
				<input th:name="usuario" type="text" th:value="${#request.userPrincipal.principal.ids}" hidden />
	
				<div id="formulario">				
				
				<h5>Nova entrada</h5>
				
				<div class="row">
					<div class="form-group col-3">
						<label for="status">Responsável</label>
						<!--<input th:field="*{Observacoes}" style="text-transform:uppercase;" type="text" class="form-control"
							id="descricao" placeholder="Resposável" />-->
						<input class="form-control" th:name="usuario" type="text" th:value="${#request.userPrincipal.principal.nome}"
						disabled="true"
						/>
					</div>
					
					<div class="form-group col-3">
						<label for="status">Observações</label>
						<input th:field="*{Observacoes}" style="text-transform:uppercase;" type="text" class="form-control"
							id="descricao" placeholder="Observações" />
					</div>
					
					
				</div>
				
				<br>
				<h5>Detalhes da Entrada</h5>
				
				<div class="row">
					
					<div class="form-group col-md-3">
						<label for="descricao">Produto</label>
						<select style="text-transform:uppercase;" border-bottom="10px"
							type="text" class="form-control" id="descricao" placeholder="Descrição">
							<option value="null" disabled="true" selected="true">selecione o produto...</option>
							<option th:if="${produto.status} == true" th:each="produto : ${produtos}" th:value="${produto.id}" th:text="${produto.descricao}">
							</option>
						</select>
					</div>
						
						
					<div class="form-group col-md-3">
						<label for="status">Quantidade</label><br>
						<input  type="number" min="1" class="form-control" id="quantidade"
							placeholder="Selecione a quantidade" required />
					</div>
					
					
				<!-- 
					th:field="*{detalhe.produto}"
					th:field="*{detalhe.quantidade}"
					
					<div class="form-group col-md-3">
					<br>
					<button th:onclick="add(${produtos})" id="addCampo" type="button" class="btn btn-primary btn-sm"> <i class="oi oi-plus"> </i></button>
					</div>
					
					<div id="novocampo"> </div>
					<input type="hidden" value="1" id="numerocampos"/>
					-->
					
					
					<!--TEST AREA-->
					<!-- FIM TEST AREA -->
					
				</div>
				
				
				
				
				<br>
				
				
				
				<!--<div class="form-row">
					<div class="form-group col-md-3">
						<label for="descricao">Produto</label>
						<select th:field="*{detalhe.produto}" style="text-transform:uppercase;" border-bottom="10px"
							type="text" class="form-control" id="descricao" placeholder="Descrição">
							<option value="null" disabled="true" selected="true">selecione o produto...</option>
							<option th:each="produto : ${produtos}" th:value="${produto.id}" th:text="${produto.descricao}">
							</option>
						</select>
					</div>
				</div>-->
					
					<!-- <div class="row mb-3">
							<div class="col-4">
								<textarea class="form-control" id="txt2a" name="txt2a"
									placeholder="Titulo Descrição 1"></textarea>
							</div>
							<div class="col-4">
								<textarea class="form-control" id="txt2b" name="txt2b"
									placeholder="Detalhe Descrição 1"></textarea>
							</div>
							<div class="col-4">
								<textarea class="form-control" id="txt2b" name="txt2b"
									placeholder="Detalhe Descrição 1"></textarea>
							</div>
						</div>-->
					
				</div>
				
				<input type="hidden" id="id" name="id" />
				 
				 
				<button type="submit" class="btn btn-primary btn-sm">Salvar</button>
				
				<table class="table" > 
					
					<thead>
						 <tr>
	                        <th>Produto</th>
	                        <th>Quantidade</th>   
	                        <th>Ações</th>               
	                    </tr>
					</thead>
					
					<tbody>
					
						<tr style="text-transform:uppercase;">
							
							<td>mesa</td>
							<td>2</td>
							<td>
							<a class="btn btn-info btn-sm"  role="button">
	                                <span class="oi oi-brush" title="Excluir" aria-hidden="true"></span>
	                            </a>
							<a class="btn btn-danger btn-sm" th:href="@{/entrada/excluir/{id} (id=${entrada.id}) }" role="button">
	                                <span class="oi oi-circle-x" title="Excluir" aria-hidden="true"></span>
	                            </a>
							</td>
						</tr>
						
						<tr style="text-transform:uppercase;">
							
							<td></td>
							<td>2</td>
							<td>
							<a class="btn btn-info btn-sm"  role="button">
	                                <span class="oi oi-brush" title="Excluir" aria-hidden="true"></span>
	                            </a>
							<a class="btn btn-danger btn-sm" th:href="@{/entrada/excluir/{id} (id=${entrada.id}) }" role="button">
	                                <span class="oi oi-circle-x" title="Excluir" aria-hidden="true"></span>
	                            </a>
							</td>
							
						</tr>
						
						
					</tbody>
				</table>
				
			</form>
			
		</div>
	
	
	
					
	<!--	<script>
			function add(listaprodutos){	
				
				console.log("listaprodutos: "+ listaprodutos);
				
	      		var new_chq_no = parseInt($('#numerocampos').val())+1;
	      		var novalinha =
	      			"<div> "    				
	      		+  		'<select th:field="*{detalhe.produto}" style="text-transform:uppercase;" border-bottom="10px" type="text" class="form-control" id="prod_'+new_chq_no+'" placeholder="Descrição">  '
				+  		'		<option value="null" disabled="true" selected="true">selecione o produto...</option> '
				+  		'		<option th:each="produto : ${listaprodutos}" th:value="${produto.id}" th:text="${produto.descricao}">  '
				+  		'		</option>  '
				+  		'	</select>  '
	      		+  		'	<input type="number" id="quant_'+new_chq_no+'">  '
	      		+  		'</div>'; 
	      			
	      		$('#novocampo').append(novalinha);
	      		$('#numerocampos').val(new_chq_no);
	   		}
		</script> -->
			
		
		
		
	<!--	<script>
			function add(){
								
	      		var new_chq_no = parseInt($('#total_chq').val())+1;
	      		var new_input="<input type='text' id='new_"+new_chq_no+"'>";
	      		
	      		$('#new_chq').append(new_input);
	      		$('#total_chq').val(new_chq_no);
	   		}
		</script>-->	
		
		
			
</section>
</body>
</html>


